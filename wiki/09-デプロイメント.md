# ğŸš¢ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

## ãƒ‡ãƒ—ãƒ­ã‚¤æ§‹æˆï¼ˆç¾çŠ¶ã®è¨˜éŒ²ï¼‰

report.md ã®ã€Œ2026-01-14 JSTã€æ™‚ç‚¹ã®é‹ç”¨ãƒ‘ãƒƒãƒã«åŸºã¥ãæ§‹æˆã§ã™ã€‚ç’°å¢ƒãŒå¤‰ã‚ã£ãŸå ´åˆã¯æœ€æ–°å€¤ã¸æ›´æ–°ã—ã¦ãã ã•ã„ã€‚(å‚ç…§: report.md:1-48)

- review-page: Vercel Project Aã€Root `apps/review-page`
- line-ai-bot: Vercel Project Bã€Root `apps/line-ai-bot`

(å‚ç…§: report.md:13-19)

## ä¸»è¦URLï¼ˆè¨˜éŒ²ï¼‰

- Webhook: `https://line-liart.vercel.app/api/webhook`
- Ask API: `https://campus-ai-eight.vercel.app/api/ask`

(å‚ç…§: report.md:20-23)

## å¤–éƒ¨URLä¸€è¦§ï¼ˆæå‡ºç”¨ãƒ»å…¨æ–‡è¨˜è¼‰ï¼‰

```text
review-page (Vercel): https://campus-ai-eight.vercel.app
line-ai-bot (Vercel): https://line-liart.vercel.app
LINE Webhook: https://line-liart.vercel.app/api/webhook
Ask API: https://campus-ai-eight.vercel.app/api/ask
```
(å‚ç…§: report.md:13-23)

## ãƒ‡ãƒ—ãƒ­ã‚¤ã®æµã‚Œï¼ˆæ¦‚ç•¥ï¼‰

```mermaid
flowchart LR
  Review[review-page] --> VercelA[Vercel Project A]
  Line[line-ai-bot] --> VercelB[Vercel Project B]
  VercelB --> LineWebhook[/api/webhook]
  VercelA --> AskAPI[/api/ask]
```

## Vercel è¨­å®šï¼ˆline-ai-botï¼‰

```json
{
  "builds": [{ "src": "api/webhook.js", "use": "@vercel/node" }], // Webhook ã‚’ Node ã§å®Ÿè¡Œ
  "routes": [{ "src": "/api/webhook", "dest": "api/webhook.js" }]
}
```
(å‚ç…§: apps/line-ai-bot/vercel.json:1-5)

## ç’°å¢ƒå¤‰æ•°ï¼ˆæœ€ä½é™ï¼‰

- å…±é€š: `SUPABASE_URL`, `SUPABASE_SERVICE_ROLE_KEY`, `LINE_HASH_PEPPER`
- review-page: `OPENAI_API_KEY`, `BATCH_TOKEN`, `NEXT_PUBLIC_LIFF_ID`
- line-ai-bot: `LINE_CHANNEL_SECRET`, `LINE_CHANNEL_ACCESS_TOKEN`, `ASK_API_URL`

(å‚ç…§: report.md:31-48)

## GitHub Actionsï¼ˆãƒãƒƒãƒå®šæœŸå®Ÿè¡Œï¼‰

- 10åˆ†ã”ã¨ã« embeddings / rollups ã‚’å®Ÿè¡Œã€‚

```yaml
- name: Run embeddings batch
  run: |
    curl -sS -X POST "$REVIEW_BASE_URL/api/batch/embeddings/run" \
      -H "x-batch-token: $BATCH_TOKEN" \
      -H "x-batch-runner: github-actions" \
      --data '{}' \
      --fail
```
(å‚ç…§: .github/workflows/batch-jobs.yml:12-26)

## ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆ

- LINE ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ â†’ è¿”ä¿¡ãŒè¿”ã‚‹
- `/api/ask` ãŒç’°å¢ƒå¤‰æ•°ä¸è¶³ã§è½ã¡ãªã„

(å‚ç…§: report.md:52-55)

æ¬¡ã«é€²ã‚€å ´åˆã¯ [ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](./10-ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
